
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>7. Sentiment analysis &#8212; Text and Data Mining Tutorial</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet">
  <link href="../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe,.cell"
        const thebe_selector_input = "pre,.cell_input div.highlight"
        const thebe_selector_output = ".output,.cell_output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="8. Lexicons" href="8%20Lexicons.html" />
    <link rel="prev" title="6. NLP" href="6%20NLP.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Text and Data Mining Tutorial</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../Welcome.html">
   Welcome
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Tutorial
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../1%20Acquiring%20texts.html">
   1. Acquiring texts
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../2%20Tokenisation.html">
   2. Word frequencies
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../3%20Word%20frequencies.html">
   3. Word frequencies
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../4%20Examining_context.html">
   4. Examining the context of words
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../5%20Type-token_ratio.html">
   5. Type-token ratio
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../6%20NLP.html">
   6. NLP
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../7%20Sentiment_analysis.html">
   7. Sentiment analysis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../8%20Lexicons.html">
   8. Lexicons
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../9%20Diction.html">
   9. Diction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../10%20Named_Entity_Recognition.html">
   Named Entity Recognition
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../11%20Differences_and_Similarities.html">
   Differences and similarities
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../12%20Topic%20modelling.html">
   Topic modelling
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Solutions to the exercises
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="1%20Acquiring%20texts.html">
   1. Acquiring texts
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2%20Tokenisation.html">
   2. Tokenisation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="3%20Word%20frequencies.html">
   3. Word frequencies
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="4%20Examining_context.html">
   4. Examining context
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="5%20Type-token_ratio.html">
   5. Type-token ratio
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="6%20NLP.html">
   6. NLP
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   7. Sentiment analysis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="8%20Lexicons.html">
   8. Lexicons
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="9%20Diction.html">
   9. Diction
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/notebooks/Solutions/7 Sentiment_analysis.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/cdsleiden/tdm-tutorial/gh-pages?urlpath=tree/docs/notebooks/Solutions/7 Sentiment_analysis.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <button type="button" class="btn btn-secondary topbarbtn"
            onclick="initThebeSBT()" title="Launch Thebe" data-toggle="tooltip" data-placement="left"><i
                class="fas fa-play"></i><span style="margin-left: .4em;">Live Code</span></button>
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercise-7-1">
   Exercise 7.1
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercise-7-2">
   Exercise 7.2
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercise-7-3">
   Exercise 7.3
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="sentiment-analysis">
<h1>7. Sentiment analysis<a class="headerlink" href="#sentiment-analysis" title="Permalink to this headline">¶</a></h1>
<div class="section" id="exercise-7-1">
<h2>Exercise 7.1<a class="headerlink" href="#exercise-7-1" title="Permalink to this headline">¶</a></h2>
<p>Use the code below to download a file named ‘ulysses_reviews.txt’, available at <a class="reference external" href="https://edu.nl/fyf8v">https://edu.nl/fyf8v</a></p>
<p>This file contains the full text of a number of reviews of James Joyce’s novel <em>Ulysses</em> which were posted on the <a class="reference external" href="https://www.goodreads.com/book/show/338798.Ulysses">goodReads</a> social reading platform.</p>
<p>Can you select all the positive words from these reviews? Can you also select all the words with a negative connotation?
Is the number of positive words higher than the number of than negative words?</p>
<p>You can the steps below:</p>
<ol class="simple">
<li><p>Create two lists, named <code class="docutils literal notranslate"><span class="pre">positive_words</span></code> and <code class="docutils literal notranslate"><span class="pre">negative_words</span></code>.</p></li>
<li><p>Tokenise the text file, and calculate the score for positivity and the score for negativity for each of these words.</p></li>
<li><p>If the posiitivity score is higher than 0.75, append the word to the list named <code class="docutils literal notranslate"><span class="pre">positive_words</span></code>. If the negativitiy score is higher than 0.75, append the word to <code class="docutils literal notranslate"><span class="pre">negative_words</span></code>.</p></li>
<li><p>Finally, you can subtract the length of the list <code class="docutils literal notranslate"><span class="pre">negative_words</span></code> from the length of the list <code class="docutils literal notranslate"><span class="pre">positive_words</span></code></p></li>
</ol>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">requests</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;http://edu.nl/fyf8v&#39;</span><span class="p">)</span>
<span class="k">if</span> <span class="n">response</span><span class="p">:</span>
    <span class="n">response</span><span class="o">.</span><span class="n">encoding</span> <span class="o">=</span> <span class="s1">&#39;utf-8&#39;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span> <span class="s1">&#39;ulysses_reviews.txt&#39;</span> <span class="p">,</span> <span class="s1">&#39;w&#39;</span> <span class="p">,</span> <span class="n">encoding</span> <span class="o">=</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">out</span><span class="p">:</span>
        <span class="n">out</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
    
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">nltk</span> <span class="kn">import</span> <span class="n">word_tokenize</span>
<span class="n">reviews</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span> <span class="s1">&#39;ulysses_reviews.txt&#39;</span> <span class="p">,</span> <span class="n">encoding</span> <span class="o">=</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>

<span class="n">positive_words</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">negative_words</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">reviews</span><span class="p">:</span>
    <span class="n">words</span> <span class="o">=</span> <span class="n">word_tokenize</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">words</span><span class="p">:</span>
        <span class="n">scores</span> <span class="o">=</span> <span class="n">ana</span><span class="o">.</span><span class="n">polarity_scores</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">scores</span><span class="p">[</span><span class="s2">&quot;pos&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0.75</span><span class="p">:</span>
            <span class="n">positive_words</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">scores</span><span class="p">[</span><span class="s2">&quot;neg&quot;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0.75</span><span class="p">:</span>
            <span class="n">negative_words</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
        
<span class="c1">#print( positive_words) </span>
<span class="c1">#print( negative_words) </span>

<span class="nb">print</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span><span class="n">positive_words</span><span class="p">)</span> <span class="p">)</span>
<span class="nb">print</span><span class="p">(</span> <span class="nb">len</span><span class="p">(</span><span class="n">negative_words</span><span class="p">)</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>1362
825
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="exercise-7-2">
<h2>Exercise 7.2<a class="headerlink" href="#exercise-7-2" title="Permalink to this headline">¶</a></h2>
<p>What is the most negative sentence in these reviews of <em>Ulysses</em>? What is the most positive sentence?</p>
<p>Try to implement the following steps:</p>
<ol class="simple">
<li><p>Create a dictionary named <code class="docutils literal notranslate"><span class="pre">sent_scores</span></code> which can save the scores. In this dictionary, you can use sentences as keys, and the compound scores as values.</p></li>
<li><p>Navigate across all the lines in the file. Each line of the file is the full text of single review.</p></li>
<li><p>Tokenisise the reviews into sentences.</p></li>
<li><p>Navigate across all the sentences in these reviews and save the compound scores for these sentences in the dictionary <code class="docutils literal notranslate"><span class="pre">sent_scores</span></code>.</p></li>
<li><p>Sort the dictionary named <code class="docutils literal notranslate"><span class="pre">sent_scores</span></code> in a descending order, and print the first few items it contain. The postive sentences will be shown at the top of the list. To see the negative sentence, you need to sort the dictionary in a descending order.</p></li>
</ol>
<p>Unfortunately, there is no standard function in Python that you can use to sort a dictionary by its values. This specific task can be performed using the function <code class="docutils literal notranslate"><span class="pre">sortedByValue()</span></code>, defined below. This function can opionally be used with a parameter named <code class="docutils literal notranslate"><span class="pre">ascending</span></code>. If the value of this parameter is <code class="docutils literal notranslate"><span class="pre">False</span></code>, the values will be sorted in a descending order.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">sortedByValue</span><span class="p">(</span> <span class="nb">dict</span> <span class="p">,</span> <span class="n">ascending</span> <span class="o">=</span> <span class="kc">True</span> <span class="p">):</span>
    <span class="k">if</span> <span class="n">ascending</span><span class="p">:</span> 
        <span class="k">return</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">dict</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">item</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">])}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">dict</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">item</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">]))}</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">nltk</span> <span class="kn">import</span> <span class="n">sent_tokenize</span>
<span class="n">sent_scores</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>

<span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span> <span class="s1">&#39;Ulysses_reviews.txt&#39;</span> <span class="p">,</span> <span class="n">encoding</span> <span class="o">=</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">review</span> <span class="ow">in</span> <span class="n">file</span><span class="p">:</span>
    <span class="n">sentences</span> <span class="o">=</span> <span class="n">sent_tokenize</span><span class="p">(</span><span class="n">review</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">sentences</span><span class="p">:</span>
        <span class="n">scores</span> <span class="o">=</span> <span class="n">ana</span><span class="o">.</span><span class="n">polarity_scores</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="n">sent_scores</span><span class="p">[</span><span class="n">s</span><span class="p">]</span> <span class="o">=</span> <span class="n">scores</span><span class="p">[</span><span class="s1">&#39;compound&#39;</span><span class="p">]</span>
        
<span class="n">nr_sentences</span> <span class="o">=</span> <span class="mi">10</span>

<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Postive sentences</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">sortedByValue</span><span class="p">(</span> <span class="n">sent_scores</span> <span class="p">,</span> <span class="n">ascending</span> <span class="o">=</span> <span class="kc">False</span> <span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">s</span><span class="si">}</span><span class="s1"> [</span><span class="si">{</span> <span class="n">sent_scores</span><span class="p">[</span><span class="n">s</span><span class="p">]</span><span class="si">}</span><span class="s1">]&#39;</span> <span class="p">)</span>
    <span class="n">i</span><span class="o">+=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">nr_sentences</span><span class="p">:</span>
        <span class="k">break</span>
        
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Negative sentences</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        
<span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">sortedByValue</span><span class="p">(</span> <span class="n">sent_scores</span> <span class="p">,</span> <span class="n">ascending</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">s</span><span class="si">}</span><span class="s1"> [</span><span class="si">{</span> <span class="n">sent_scores</span><span class="p">[</span><span class="n">s</span><span class="p">]</span><span class="si">}</span><span class="s1">]&#39;</span> <span class="p">)</span>
    <span class="n">i</span><span class="o">+=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="n">nr_sentences</span><span class="p">:</span>
        <span class="k">break</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Postive sentences

Yes it is the greatest and yes you should read it and yes each word will blossom in your mind and Yes will I give this book a 5/5 and yes I said yes I will Yes. [0.9686]
There were moments that I was in love with the book, believing this was the greatest novel I had ever read, I was convinced of Joyce’s brilliance and inspired by his genius. [0.9661]
I still think, though, that it is the marriage of a great storyline and beautiful prose that creates a true masterpiece. [0.9517]
This day, dubbed Bloomsday, is celebrated with increasing popularity in modern times, which is a testament to the lasting greatness of the novel (and to the desire to drink and be merry of all people). [0.936]
Love, love, love, baby. [0.9274]
Homer‘s Odysseus is a great warrior king who goes from triumph to triumph for more than a decade, conquering monsters, other heroes and gods. [0.9274]
If you prefer exciting, stimulating, rewarding reading experiences, Ulysses might be the perfect book for you. [0.9217]
But, there is great reward that awaits your patience. [0.9209]
Loves loves to fucking love loveWhat a classic line. [0.9168]
Upon reflecting back after completion, only then did I realize that this truly is one of the greatest books ever written and I have come to love it. [0.9149]

Negative sentences

I imagined grim faces of men enduring hard times, the bitter stink of stale beer in old pubs, a depressing general decay and death. [-0.9571]
Not lost as engrossed, but lost in the sense that I had no idea where the hell I was in this labyrinth of writing and that’s before I lost my page. [-0.9417]
I found my short interaction with Ulysees to be so boring, so completely confusing, so brain-numbing (in the worst possible way) that I was forced to abandon it. [-0.9378]
I hated hated hated this book. [-0.9274]
I was so terribly bored with large parts of the novel, frustrated, agonised and, on one occasion, actually sent to sleep. [-0.908]
I would say to that, you’re just a bad torturer, and a bad reader. [-0.8834]
We&#39;re all gross, but Joyce is gross in a specific way that&#39;s not mine, and we&#39;re back to I don&#39;t care for him. [-0.8639]
But it is all disgusting food, all bloody and fleshy, human flesh? [-0.8573]
I never knew a book could make one so violently angry. [-0.8571]
He made me very angry countless times with his tip-toeing and what seemed to be a general lack of courage to engage in confrontation (I should just say &quot;he lacked balls&quot;, as it would definitely go well with the feel of the book and its indecent manners, as it was accused of being upon its release) - but when I came to think of it, even this anger Bloom provoked in me was a brilliant move from Joyce&#39;s part, especially once we think Leopold is a modern day Odysseus: he flees from fights as quickly as the Greek warrior ran into them, asked, solicited them. [-0.8446]
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="exercise-7-3">
<h2>Exercise 7.3<a class="headerlink" href="#exercise-7-3" title="Permalink to this headline">¶</a></h2>
<p>Does <em>Heart of Darkness</em> express more positivity than <em>Pride and Prejudice</em>? Try to answer this question by following the steps below:</p>
<ol class="simple">
<li><p>Read in the full text of <em>Heart of Darkness</em></p></li>
<li><p>Create an empty list, named for <em>all_scores</em> for instance, to capture all the scores.</p></li>
<li><p>Divide the novel into its separate sentences.</p></li>
<li><p>For each sentence, find the positive sentiment score.</p></li>
<li><p>Add this score to the list <em>all_scores</em>.</p></li>
<li><p>Once you have processed all the sentences, divide the sum of all the scores by by the total number of sentences.</p></li>
<li><p>Follow steps 1-4 for the reviews <em>Pride and Prejudice</em>, and compare the two percentages you have calculated.</p></li>
</ol>
<p>The goodReads reviews of <em>Pride and Prejudice</em> can be downloaded using the code below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">nltk</span> <span class="kn">import</span> <span class="n">sent_tokenize</span>
<span class="kn">from</span> <span class="nn">os.path</span> <span class="kn">import</span> <span class="n">join</span>

<span class="k">def</span> <span class="nf">average_score</span><span class="p">(</span><span class="n">file</span><span class="p">):</span>
    <span class="n">all_scores</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span> <span class="n">file</span> <span class="p">,</span> <span class="n">encoding</span> <span class="o">=</span> <span class="s1">&#39;utf-8&#39;</span> <span class="p">)</span>
    <span class="n">full_text</span> <span class="o">=</span> <span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
    <span class="n">sentences</span> <span class="o">=</span> <span class="n">sent_tokenize</span><span class="p">(</span> <span class="n">full_text</span> <span class="p">)</span>
    <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">sentences</span><span class="p">:</span>
        <span class="n">scores</span> <span class="o">=</span> <span class="n">ana</span><span class="o">.</span><span class="n">polarity_scores</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="n">all_scores</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">scores</span><span class="p">[</span><span class="s2">&quot;pos&quot;</span><span class="p">]</span> <span class="p">)</span>
    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">all_scores</span><span class="p">)</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_scores</span><span class="p">)</span>
        

<span class="n">path</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span> <span class="s1">&#39;Corpus&#39;</span> <span class="p">,</span> <span class="s1">&#39;ARoomWithAView.txt&#39;</span> <span class="p">)</span>
<span class="nb">print</span><span class="p">(</span> <span class="s1">&#39;Average sentiment score for &quot;Heart of Darkness&quot;:&#39;</span> <span class="p">)</span>
<span class="nb">print</span><span class="p">(</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span> <span class="nb">round</span><span class="p">(</span> <span class="n">average_score</span><span class="p">(</span><span class="n">path</span><span class="p">),</span><span class="mi">3</span><span class="p">)</span> <span class="si">}</span><span class="s1">&#39;</span> <span class="p">)</span>

<span class="n">path</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span> <span class="s1">&#39;Corpus&#39;</span> <span class="p">,</span> <span class="s1">&#39;PrideAndPrejudice.txt&#39;</span> <span class="p">)</span>
<span class="nb">print</span><span class="p">(</span> <span class="s1">&#39;Average sentiment score for &quot;Pride and Prejudice&quot;:&#39;</span> <span class="p">)</span>
<span class="nb">print</span><span class="p">(</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span> <span class="nb">round</span><span class="p">(</span> <span class="n">average_score</span><span class="p">(</span><span class="n">path</span><span class="p">),</span><span class="mi">3</span><span class="p">)</span> <span class="si">}</span><span class="s1">&#39;</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Average sentiment score for &quot;Heart of Darkness&quot;:
0.105
Average sentiment score for &quot;Pride and Prejudice&quot;:
0.127
</pre></div>
</div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "cdsleiden/tdm-tutorial",
            ref: "gh-pages",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./notebooks/Solutions"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="6%20NLP.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">6. NLP</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="8%20Lexicons.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">8. Lexicons</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By Peter Verhaar<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>