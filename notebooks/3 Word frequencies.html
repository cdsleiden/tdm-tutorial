
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>3. Word frequencies &#8212; Text and Data Mining Tutorial</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet">
  <link href="../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe,.cell"
        const thebe_selector_input = "pre,.cell_input div.highlight"
        const thebe_selector_output = ".output,.cell_output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="4. Examining the context of words" href="4%20Examining_context.html" />
    <link rel="prev" title="2. Word frequencies" href="2%20Tokenisation.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../index.html">
      
      
      
      <h1 class="site-logo" id="site-title">Text and Data Mining Tutorial</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../Welcome.html">
   Welcome
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Tutorial
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="1%20Acquiring%20texts.html">
   1. Acquiring texts
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="2%20Tokenisation.html">
   2. Word frequencies
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   3. Word frequencies
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="4%20Examining_context.html">
   4. Examining the context of words
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="5%20Type-token_ratio.html">
   5. Type-token ratio
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="6%20NLP.html">
   6. NLP
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="7%20Sentiment_analysis.html">
   7. Sentiment analysis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="8%20Lexicons.html">
   8. Lexicons
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="9%20Diction.html">
   9. Diction
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="10%20Named_Entity_Recognition.html">
   Named Entity Recognition
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="11%20Differences_and_Similarities.html">
   Differences and similarities
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="12%20Topic%20modelling.html">
   Topic modelling
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Solutions to the exercises
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Solutions/1%20Acquiring%20texts.html">
   1. Acquiring texts
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Solutions/2%20Tokenisation.html">
   2. Tokenisation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Solutions/3%20Word%20frequencies.html">
   3. Word frequencies
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Solutions/4%20Examining_context.html">
   4. Examining context
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Solutions/5%20Type-token_ratio.html">
   5. Type-token ratio
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Solutions/6%20NLP.html">
   6. NLP
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Solutions/7%20Sentiment_analysis.html">
   7. Sentiment analysis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Solutions/8%20Lexicons.html">
   8. Lexicons
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Solutions/9%20Diction.html">
   9. Diction
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/notebooks/3 Word frequencies.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/cdsleiden/tdm-tutorial/gh-pages?urlpath=tree/docs/notebooks/3 Word frequencies.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <button type="button" class="btn btn-secondary topbarbtn"
            onclick="initThebeSBT()" title="Launch Thebe" data-toggle="tooltip" data-placement="left"><i
                class="fas fa-play"></i><span style="margin-left: .4em;">Live Code</span></button>
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   3. Word frequencies
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#stopwords">
     Stopwords
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#a-word-cloud">
     A word cloud
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#caveats">
     Caveats
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#tokeniser-functions-in-the-tdmh-package">
     Tokeniser functions in the
     <code class="docutils literal notranslate">
      <span class="pre">
       tdmh
      </span>
     </code>
     package
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#exercises">
   Exercises
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercise-3-1">
     Exercise 3.1.
    </a>
   </li>
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercise-3-2">
     Exercise 3.2.
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="word-frequencies">
<h1>3. Word frequencies<a class="headerlink" href="#word-frequencies" title="Permalink to this headline">¶</a></h1>
<p>The notebook on <em>Tokenisation</em> explained how we can divide a text into the separate words. Once we have managed to do this, we can begin to count the <strong>types</strong> (i.e. the occurrences of the unique words).</p>
<p>We can use a dictionary for this specific task. This specific data structure is useful in this situation, as it can be used to store pairs of values. In a dictionary created to store word frequencies, we can use the types that found in the text as keys, and, as associated values, we can capture the number of times these types occur.</p>
<p>To count the number of times of word occurs in a text, we can choose the following approach:</p>
<ol class="simple">
<li><p>Create a Python list of all the individual words (or <em>tokens</em>) of the text.</p></li>
<li><p>Iterate over all of these words.</p></li>
<li><p>Add each word as a key to a dictionary. At the first occurrence of the word, assign the value 1. For all the occurrences that follow, increment the current value associated with word by 1.</p></li>
</ol>
<p>The code below contains an implementation of these steps. It combines some of the concepts that have been discussed fo far.</p>
<p>It firstly defined a string named <code class="docutils literal notranslate"><span class="pre">quote</span></code>. The individual words in this string are found using the <code class="docutils literal notranslate"><span class="pre">word_tokenize()</span></code> method. The <code class="docutils literal notranslate"><span class="pre">remove_punctuation()</span></code> method, defined in <code class="docutils literal notranslate"><span class="pre">tdmh</span></code>, removes tokes that do not contain any alphanumeric characters.</p>
<p>The code then navigates across all the of the words in the string, using a <code class="docutils literal notranslate"><span class="pre">for</span></code> loop. The code is also assumed that the tokens should be processed in a case-insensitive ways. The token ‘We’ (starting with a capital) should be analysed as an instance of the token ‘we’ (with the first character in lower case). We can accomplish this by converted all words into lower case using the <code class="docutils literal notranslate"><span class="pre">lower()</span></code> method.</p>
<p>The words that are found in this way will become keys in the dictionary named <code class="docutils literal notranslate"><span class="pre">freq</span></code> (short for ‘frequency’). Initially, this dictionary is completely empty. At the first occurrence of a given word, the word will clearly not be in this dictionary yet. In this case, the <code class="docutils literal notranslate"><span class="pre">get()</span></code> method returns the value <code class="docutils literal notranslate"><span class="pre">0</span></code>. This initial value will immediately be incremented with value <code class="docutils literal notranslate"><span class="pre">1</span></code>. After this, the existing value will be updated, with every new occurrence of the word in the text.</p>
<p>The program does this for each individual word. Once Python has processed the full text, the dictionary <code class="docutils literal notranslate"><span class="pre">freq</span></code> will have data about the occurrences of all the words in this full string.</p>
<p>The final few lines of this code snippet print the frequencies of the all the words that were found in the quote.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">nltk</span> <span class="kn">import</span> <span class="n">word_tokenize</span>
<span class="kn">from</span> <span class="nn">tdmh</span> <span class="kn">import</span> <span class="o">*</span> 


<span class="n">freq</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>

<span class="n">quote</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;It was the best of times, it was the worst of times, </span>
<span class="s1">it was the age of wisdom, it was the age of foolishness, </span>
<span class="s1">it was the epoch of belief, it was the epoch of incredulity&#39;&#39;&#39;</span>

<span class="n">words</span> <span class="o">=</span> <span class="n">word_tokenize</span><span class="p">(</span><span class="n">quote</span><span class="p">)</span>
<span class="n">words</span> <span class="o">=</span> <span class="n">remove_punctuation</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>

<span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">words</span><span class="p">:</span>
    <span class="n">w</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="n">freq</span><span class="p">[</span><span class="n">w</span><span class="p">]</span> <span class="o">=</span> <span class="n">freq</span><span class="o">.</span><span class="n">get</span><span class="p">(</span> <span class="n">w</span><span class="p">,</span> <span class="mi">0</span> <span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
         
<span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">freq</span><span class="p">:</span>
    <span class="n">word</span> <span class="o">=</span> <span class="s1">&#39;occurrence&#39;</span>
    <span class="k">if</span> <span class="n">freq</span><span class="p">[</span><span class="n">f</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="n">word</span> <span class="o">+=</span> <span class="s1">&#39;s&#39;</span>
    <span class="nb">print</span><span class="p">(</span> <span class="sa">f</span><span class="s1">&#39; &quot;</span><span class="si">{</span><span class="n">f</span><span class="si">}</span><span class="s1">&quot; =&gt; </span><span class="si">{</span><span class="n">freq</span><span class="p">[</span><span class="n">f</span><span class="p">]</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">word</span><span class="si">}</span><span class="s1">&#39;</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span> &quot;it&quot; =&gt; 6 occurrences
 &quot;was&quot; =&gt; 6 occurrences
 &quot;the&quot; =&gt; 6 occurrences
 &quot;best&quot; =&gt; 1 occurrence
 &quot;of&quot; =&gt; 6 occurrences
 &quot;times&quot; =&gt; 2 occurrences
 &quot;worst&quot; =&gt; 1 occurrence
 &quot;age&quot; =&gt; 2 occurrences
 &quot;wisdom&quot; =&gt; 1 occurrence
 &quot;foolishness&quot; =&gt; 1 occurrence
 &quot;epoch&quot; =&gt; 2 occurrences
 &quot;belief&quot; =&gt; 1 occurrence
 &quot;incredulity&quot; =&gt; 1 occurrence
</pre></div>
</div>
</div>
</div>
<p>The keys in the dictionary named <code class="docutils literal notranslate"><span class="pre">freq</span></code> are stored in a specific order: the order in which they were found in the original text fragment.</p>
<p>When you aim to analyse word frequencies, you may want to display the items in a different order. It can be useful, for example, to sort the list by frequency, and to make sure that the words with the highest frequencies are shown at the top of the list.</p>
<p>The standard <code class="docutils literal notranslate"><span class="pre">sorted()</span></code> function can only sort dictionaries on the basis of the keys, unfortunately. There is no standard method in Python that you can use to sort a dictionary by its values. To address this lacuna, we can define a new method.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">sortedByValue</span><span class="p">(</span> <span class="nb">dict</span> <span class="p">,</span> <span class="n">ascending</span> <span class="o">=</span> <span class="kc">True</span> <span class="p">):</span>
    <span class="k">if</span> <span class="n">ascending</span><span class="p">:</span> 
        <span class="k">return</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">dict</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">item</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">])}</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">dict</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">item</span><span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="mi">1</span><span class="p">]))}</span>
</pre></div>
</div>
</div>
</div>
<p>For the purpose of this tutorial, you do not need to understand the full details of this new method. For the time being, you can treat this function as a ‘black box’. This function demands a dictionary as input, and it returns a <strong>sorted</strong> dictionary as output. importantly, the function sorts by the <strong>values</strong> and not by the keys.</p>
<p>The cell below offers a demonstration.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">sortedByValue</span><span class="p">(</span> <span class="n">freq</span> <span class="p">)</span> <span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">f</span><span class="si">}</span><span class="s1"> -&gt; </span><span class="si">{</span><span class="n">freq</span><span class="p">[</span><span class="n">f</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>best -&gt; 1
worst -&gt; 1
wisdom -&gt; 1
foolishness -&gt; 1
belief -&gt; 1
incredulity -&gt; 1
times -&gt; 2
age -&gt; 2
epoch -&gt; 2
it -&gt; 6
was -&gt; 6
the -&gt; 6
of -&gt; 6
</pre></div>
</div>
</div>
</div>
<p>The function <code class="docutils literal notranslate"><span class="pre">sortedByValue()</span></code> sorts the values in an ascending order by default. To display the values in a descending order, you can supply a parameter named <code class="docutils literal notranslate"><span class="pre">ascending</span></code> with value <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">sortedByValue</span><span class="p">(</span> <span class="n">freq</span> <span class="p">,</span> <span class="n">ascending</span> <span class="o">=</span> <span class="kc">False</span> <span class="p">)</span> <span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">f</span><span class="si">}</span><span class="s1"> -&gt; </span><span class="si">{</span><span class="n">freq</span><span class="p">[</span><span class="n">f</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>of -&gt; 6
the -&gt; 6
was -&gt; 6
it -&gt; 6
epoch -&gt; 2
age -&gt; 2
times -&gt; 2
incredulity -&gt; 1
belief -&gt; 1
foolishness -&gt; 1
wisdom -&gt; 1
worst -&gt; 1
best -&gt; 1
</pre></div>
</div>
</div>
</div>
<div class="section" id="stopwords">
<h2>Stopwords<a class="headerlink" href="#stopwords" title="Permalink to this headline">¶</a></h2>
<p>In normal texts, lexical categories such pronouns, prepositions or articles (words such as ‘the’, ‘of’ and ‘it’) are generally most common. Such words are sometimes referred to as ‘function words’. Words such as these are important for producting grammatically correct sentences, but they mostly have little expessive value independently.</p>
<p>If you are interested in studying the actual contents or the semantics of a text, it can be useful to remove such frequently used function words.</p>
<p>If you want to do this, one option is to make use of the list of stopwords available as part of the <code class="docutils literal notranslate"><span class="pre">nltk</span></code> package.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">nltk.corpus</span> <span class="kn">import</span> <span class="n">stopwords</span>

<span class="n">stopwords</span> <span class="o">=</span> <span class="n">stopwords</span><span class="o">.</span><span class="n">words</span><span class="p">(</span><span class="s1">&#39;english&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">stopwords</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The code below is is a revision of the code that was discussed earlier for calculating the word frequencies. The only difference is that there is a condition in the first <code class="docutils literal notranslate"><span class="pre">for</span></code> loop. This condition has the effect that words will be added to the dictionary <code class="docutils literal notranslate"><span class="pre">freq</span></code> only if they are NOT on the list of stopwords.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">freq</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>

<span class="n">words</span> <span class="o">=</span> <span class="n">word_tokenize</span><span class="p">(</span><span class="n">quote</span><span class="p">)</span>
<span class="n">words</span> <span class="o">=</span> <span class="n">remove_punctuation</span><span class="p">(</span><span class="n">words</span><span class="p">)</span>


<span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">words</span><span class="p">:</span>
    <span class="n">w</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">w</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">stopwords</span><span class="p">:</span>
        <span class="n">freq</span><span class="p">[</span><span class="n">w</span><span class="p">]</span> <span class="o">=</span> <span class="n">freq</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">w</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>

<span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">sortedByValue</span><span class="p">(</span> <span class="n">freq</span> <span class="p">,</span> <span class="n">ascending</span> <span class="o">=</span> <span class="kc">False</span> <span class="p">)</span> <span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">f</span><span class="si">}</span><span class="s1"> -&gt; </span><span class="si">{</span><span class="n">freq</span><span class="p">[</span><span class="n">f</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>epoch -&gt; 2
age -&gt; 2
times -&gt; 2
incredulity -&gt; 1
belief -&gt; 1
foolishness -&gt; 1
wisdom -&gt; 1
worst -&gt; 1
best -&gt; 1
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="a-word-cloud">
<h2>A word cloud<a class="headerlink" href="#a-word-cloud" title="Permalink to this headline">¶</a></h2>
<p>The code below can be used to visualise a given dictionary with a word frequencies into a word cloud.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> inline

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span> 
<span class="kn">from</span> <span class="nn">wordcloud</span> <span class="kn">import</span> <span class="n">WordCloud</span> 

<span class="n">wordcloud</span> <span class="o">=</span> <span class="n">WordCloud</span><span class="p">(</span> <span class="n">background_color</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span>  <span class="n">width</span><span class="o">=</span><span class="mi">1500</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">max_words</span><span class="o">=</span> <span class="mi">100</span><span class="p">,</span><span class="n">relative_scaling</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">normalize_plurals</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">generate_from_frequencies</span><span class="p">(</span><span class="n">freq</span><span class="p">)</span>


<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">wordcloud</span><span class="p">,</span> <span class="n">interpolation</span><span class="o">=</span><span class="s1">&#39;bilinear&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s2">&quot;off&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/3 Word frequencies_15_0.png" src="../_images/3 Word frequencies_15_0.png" />
</div>
</div>
<p>If the code above produced an error message, this may be caused by the fact that <code class="docutils literal notranslate"><span class="pre">wordcloud</span></code> module has not been inestalled yet on your computer. In that case, you may need to install the <code class="docutils literal notranslate"><span class="pre">wordcloud</span></code> module using the commands in the cell below:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="o">!</span>pip install wordcloud
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="caveats">
<h2>Caveats<a class="headerlink" href="#caveats" title="Permalink to this headline">¶</a></h2>
<p>The code that was explained in this notebook tokenises texts using the <code class="docutils literal notranslate"><span class="pre">word_tokenize()</span></code> method from <code class="docutils literal notranslate"><span class="pre">nltk</span></code>. As was explained, this method treats all the punction marks as separate tokens. Arguably, such occurrences of semi-colons, dots, commas and quotes should be ignored when we calculate the frequencies of words. We can do this by using a method which removes the tokens that don’t contain any alphanumerical characters.</p>
<p>In the case of tokens containing the genitival ‘s’ (e.g. as in “the people’s choice” or “the child’s parents”, <code class="docutils literal notranslate"><span class="pre">nltk</span></code> aims to separate the final ‘s’ from the rest of the word. As a result of this, the character ‘s’ will likewise be viewed and processed as a separate token.</p>
<p>Something siliar happens with the various parts of contracted verb forms. <code class="docutils literal notranslate"><span class="pre">nltk</span></code> aims to separate the stem from the rest of token in forms such as “don’t”, “i’m” and “weren’t”, but this results in tokens such as “‘nt”, “‘m” and “‘t”, respectively.</p>
<p>The question whether words in the genitival forms and contracted verb forms must be counted separately is of course open to debate. It can be useful to know, however, that such ‘incomplete’ tokens are also on <code class="docutils literal notranslate"><span class="pre">nltk</span></code>’s list of stopwords. When you filter the list of tokens using these stopwords, you will also get rid of seemingly nonsensical tokens such as “‘m”, “‘s” and “‘t”.</p>
</div>
<div class="section" id="tokeniser-functions-in-the-tdmh-package">
<h2>Tokeniser functions in the <code class="docutils literal notranslate"><span class="pre">tdmh</span></code> package<a class="headerlink" href="#tokeniser-functions-in-the-tdmh-package" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">tdmh</span></code> package contains a function named <code class="docutils literal notranslate"><span class="pre">tokenise()</span></code>, which combines the <code class="docutils literal notranslate"><span class="pre">word_tokenize()</span></code> method from <code class="docutils literal notranslate"><span class="pre">nltk</span></code> and the <code class="docutils literal notranslate"><span class="pre">remove_puncuation()</span></code> function, discussed in the notebook on tokenisation.</p>
<p>The package also has a function names <code class="docutils literal notranslate"><span class="pre">tokenise_remove_stopwords()</span></code> which, as is indiciated by the name, removes the stopwords as well. you can find the definition below.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">tokenise_remove_stopwords</span><span class="p">(</span><span class="n">full_text</span><span class="p">):</span>
    <span class="n">words</span> <span class="o">=</span> <span class="n">word_tokenize</span><span class="p">(</span><span class="n">full_text</span><span class="p">)</span>
    <span class="n">new_list</span><span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">words</span><span class="p">:</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">orig</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="k">if</span> <span class="n">w</span><span class="o">.</span><span class="n">isalnum</span><span class="p">()</span> <span class="ow">and</span> <span class="n">w</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">stopwords</span><span class="p">:</span>
            <span class="n">new_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">w</span> <span class="p">)</span>
    <span class="k">return</span> <span class="n">new_list</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="tex2jax_ignore mathjax_ignore section" id="exercises">
<h1>Exercises<a class="headerlink" href="#exercises" title="Permalink to this headline">¶</a></h1>
<div class="section" id="exercise-3-1">
<h2>Exercise 3.1.<a class="headerlink" href="#exercise-3-1" title="Permalink to this headline">¶</a></h2>
<p>Answer the following questions about this text file named “ARoomWithAView.txt”, which you can find in the folder named ‘Corpus’.</p>
<ul class="simple">
<li><p>How many characters are there in the novel?</p></li>
<li><p>How many words does the novel contain?</p></li>
<li><p>What are the 25 most frequent words if we exclude stop words?</p></li>
<li><p>How many times does the novel contain the token ‘Darcy’?</p></li>
</ul>
</div>
<div class="section" id="exercise-3-2">
<h2>Exercise 3.2.<a class="headerlink" href="#exercise-3-2" title="Permalink to this headline">¶</a></h2>
<p>Can you create a line chart that visualised the frequencies of the 25 most common words in <em>A Room with a View</em>? For this exercise, you can reuse some of the results of exercise 3.1.</p>
<p>To get hold of the values to be shown on the x-axis and the y-axis, you can use the <code class="docutils literal notranslate"><span class="pre">keys()</span></code> and the <code class="docutils literal notranslate"><span class="pre">values()</span></code> methods that are available for dictionaries. These methods result in specific types of objects which are called  <code class="docutils literal notranslate"><span class="pre">dict_keys</span></code> and <code class="docutils literal notranslate"><span class="pre">dict_values</span></code>. It is not easy to select the first 25 items form such object. To do this, however you can convert these objects to lists, using <code class="docutils literal notranslate"><span class="pre">list()</span></code>.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "cdsleiden/tdm-tutorial",
            ref: "gh-pages",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./notebooks"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
            <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="2%20Tokenisation.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">2. Word frequencies</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="4%20Examining_context.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">4. Examining the context of words</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By Peter Verhaar<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>